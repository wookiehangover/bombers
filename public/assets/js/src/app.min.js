((function(){if(!this.require){var a={},b={},c=function(f,g){var h=b[f],i=d(g,f),j;if(h)return h;if(!(j=a[i]||a[i=d(i,"./index")]))throw"module '"+f+"' not found";h={id:f,exports:{}};try{return b[f]=h.exports,j(h.exports,function(a){return c(a,e(i))},h),b[f]=h.exports}catch(k){throw delete b[f],k}},d=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e==".."?c.pop():e!="."&&e!=""&&c.push(e);return c.join("/")},e=function(a){return a.split("/").slice(0,-1).join("/")};this.require=function(a){return c(a,"")},this.require.define=function(b){for(var c in b)a[c]=b[c]}}return this.require.define})).call(this)({index:function(a,b,c){var d=b("lib/bombers");d.init=function(){var a=d.app,b=Backbone.Router.extend({routes:{":page":"page"},page:function(b){if(!b)return;try{a.view.getPage(b).show()}catch(c){throw new Error("404 Not Found!")}}});a.router=new b,a.view=new d.Views.App,$(document).delegate("a","click",function(b){var c=$(this).attr("href"),d=this.protocol+"//";c.slice(d.length)!==d&&(b.preventDefault(),a.router.navigate(c,!0))}),Backbone.history.start({pushState:!0})},jQuery(function(){d.init()})},"lib/bombers":function(a,b,c){var d=b("modules/app");this.Bombers={Models:{},Collections:{},Views:{App:d},app:_.extend({},Backbone.Events)},c.exports=this.Bombers},"modules/app":function(a,b,c){var d=b("modules/page");c.exports=Backbone.View.extend({el:$("#main"),initialize:function(a){this.initializePages(),this.scroll(),this.keyboard();var b=this;return $(window).on("resize",function(){b.initializePages()}),this},active_index:{},pages:{},getPage:function(a){return _(this.pages).find(function(b){if(b.id==a||b.route==a)return!0})},initializePages:function(){var a=0,b=this;this.$("article").each(function(c,e){var f=$(e);b.pages[e.id]=new d({el:f,parent:b},c),b.pages[e.id].render(),f.css("z-index",200-c).data("height",a),a+=f.height()}),this.el.css("height",a)},scroll:function(){var a=this,b=$(window);b.on("scroll",function(c){var d=a.$(".ui-active"),e=b.scrollTop(),f=d.data("height"),g=e-f;return a.active_index=d.index(),d.css({translateY:"-"+g}),g<0?a.setActive("prev"):d.height()-g<=0?a.setActive("next"):!1})},setActive:function(a){a=a||"next";var b=this.$(".ui-active"),c=b[a]();a==="prev"&&b.css("translateY",0),c.length&&(this.pages[b.attr("id")].trigger("hide"),this.pages[c.attr("id")].trigger("show"))},navigate:function(a){a=a||"next";var b=this.$(".ui-active"),c=b[a]();c.length&&(c=this.pages[c.attr("id")],c.show(600).done(function(){a==="prev"&&$("html,body").stop(),c.navigate()}))},keyboard:function(){function c(a){if($("html,body").is(":animated")===!0)return;var c=a.which;if(c in b)return b[c](),!1}var a=this,b={};b[40]=b[39]=function(){a.navigate("next")},b[38]=b[37]=function(){a.navigate("prev")},$(window).on("keydown",_.throttle(c,500))}})},"modules/page":function(a,b,c){c.exports=Backbone.View.extend({initialize:function(a,b){this.index=b,this.id=this.el.attr("id"),this.parent=a.parent,this.route=this.el.data("route")||this.id,this.bind("show",this.onShow,this),this.bind("hide",this.onHide,this)},onShow:function(){this.el.addClass("ui-active"),this.navigate()},onHide:function(){this.el.removeClass("ui-active")},show:function(a,b){b=b||0;var c=new $.Deferred,d=$(".ui-active").index(),e=a||(d===this.index?600:600*this.index);return $("html,body").stop().animate({scrollTop:this.el.data("height")+b},e,"easeInOutQuad",function(){c.resolve()}),c.promise()},navigate:function(){return $("html,body").is(":animated")===!1&&Bombers.app.router.navigate(this.route,!1),this}})}})